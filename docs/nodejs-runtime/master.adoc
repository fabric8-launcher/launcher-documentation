include::topics/templates/document-attributes.adoc[]

//override for a cleaner TOC
:toclevels: 2

= {nodejs-runtime-guide-name}
:runtime: {NodeJS}
//var for front-end topics, if below is defined in topic, its used in docs, if not its used in the front end
:docs-topic:

:context: nodejs

This guide covers concepts as well as practical details needed by developers to use the {NodeJS} runtime.

include::topics/con_nodejs-runtime-details.adoc[leveloffset=+1]

include::topics/con_missions-and-cloud-native-development-on-openshift.adoc[leveloffset=+1]


[[nodejs-available-missions-and-boosters]]
== Available Missions and Boosters for {NodeJS}

The following boosters are available for {NodeJS}.

[[mission-rest-http-nodejs]]
=== {mission-http-api-nodejs-guide-name}
:http-api-nodejs:
:context: rest-api

include::topics/rest-level-0-mission-intro.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/con_http-api-design-tradeoffs.adoc[leveloffset=+3]

:parameter-mission: http-api
:parameter-mission-name: {name-mission-http-api}

:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

:context: rest-api
include::topics/rest-level-0-mission-basic-interaction-nodejs.adoc[leveloffset=+3]

include::topics/ref_rest-resources.adoc[leveloffset=+3]

[[mission-configmap-nodejs]]
=== {mission-configmap-nodejs-guide-name}
:configmap-nodejs:

include::topics/configmap-mission-intro-paragraph.adoc[leveloffset=+3]

This mission shows you how to:

* Set up and configure a `ConfigMap`.
* Use the configuration provided by the `ConfigMap` within an application.
* Deploy changes to the `ConfigMap` configuration of running applications.

include::topics/con_about-externalized-configuration.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/con_configmap-design-tradeoffs.adoc[leveloffset=+3]

:parameter-mission: configmap
:parameter-mission-name: {name-mission-configmap}

:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]


include::topics/configmap-mission-basic-interaction-nodejs.adoc[leveloffset=+3]

include::topics/ref_configmap-resources.adoc[leveloffset=+3]

[[mission-crud-nodejs]]
=== {mission-crud-nodejs-guide-name}
//redefine this
:crud-nodejs-mission:
:nodejs-runtime-name: {NodeJS}

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

include::topics/crud-mission-intro.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/con_crud-design-tradeoffs.adoc[leveloffset=+3]

:parameter-mission: crud
:parameter-mission-name: {name-mission-crud}

:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

include::topics/crud-mission-database-interaction.adoc[leveloffset=+3]

// include additional resources
include::topics/ref_relational-database-resources.adoc[leveloffset=+3]

[[mission-health-check-nodejs]]
=== {mission-health-check-nodejs-guide-name}
:health-check-nodejs:

include::topics/health-check-mission-intro-paragraph.adoc[leveloffset=+3]

NOTE: If you are not familiar with the health check terminology, see the xref:health-check-concepts_{context}[] section first.

The purpose of this use case is to demonstrate the health check pattern through the use of probing. Probing is used to report the liveness and readiness of an application. In this use case, you configure an application which exposes an HTTP `health` endpoint to issue HTTP requests. If the container is alive, according to the liveness probe on the `health` HTTP endpoint, the management platform receives `200` as return code and no further action is required. If the `health` HTTP endpoint does not return a response, for example if the thread is blocked, then the application is not considered alive according to the liveness probe. In that case, the platform kills the pod corresponding to that application and recreates a new pod to restart the application.

This use case also allows you to demonstrate and use a readiness probe. In cases where the application is running but is unable to handle requests, such as when the application returns an HTTP `503` response code during restart, this application is not considered ready according to the readiness probe. If the application is not considered ready by the readiness probe, requests are not routed to that application until it is considered ready according to the readiness probe.

include::topics/con_health-check-concepts.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

:parameter-mission: health-check
:parameter-mission-name: {name-mission-health-check}

:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]


include::topics/health-check-mission-basic-interaction-nodejs.adoc[leveloffset=+3]

include::topics/ref_health-check-resources.adoc[leveloffset=+3]

[[mission-circuit-breaker-nodejs]]
=== {mission-circuit-breaker-nodejs-guide-name}
:circuit-breaker-nodejs:

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

// circuit breaker intro
include::topics/circuit-breaker-mission-intro-paragraph.adoc[leveloffset=+3]

This mission shows you how to implement a Circuit Breaker and Fallback pattern in your services.

include::topics/con_about-circuit-breaker.adoc[leveloffset=+3]

// CB design tradeoffs
include::topics/con_circuit-breaker-design-tradeoffs.adoc[leveloffset=+3]

:parameter-mission: circuit-breaker
:parameter-mission-name: {name-mission-circuit-breaker}
:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]


// CB basic interaction
:parameter-runtime-name: {NodeJS}
:context: {parameter-mission}-nodejs
include::topics/proc_interacting-with-the-circuit-breaker-booster.adoc[leveloffset=+3]

//TODO

// Hystrix Dashboard
// TODO:
// include::topics/circuit-breaker-mission-access-hystrix-dashboard-wf-swarm.adoc[leveloffset=+3]

// CB resources
include::topics/ref_circuit-breaker-resources.adoc[leveloffset=+3]


[[mission-rest-http-secured-nodejs]]
=== {mission-secured-nodejs-guide-name}
:secured-nodejs-mission:
:runtime-name: {NodeJS}

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

include::topics/secured-mission-intro-paragraph-missions.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

include::topics/secured-mission-intro.adoc[leveloffset=+3]

//this needs to be a level lower due to secured-mission-intro.adoc
include::topics/secured-mission-nodejs-adapter.adoc[leveloffset=+4]

:context: secured-osl
include::topics/assembly_deploying-the-secured-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: secured-ocp
include::topics/assembly_deploying-the-secured-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]

:parameter-runtime: nodejs
:node-js-sso-temp-workaround:
include::topics/assembly_authenticating-to-the-secured-booster-api-endpoint.adoc[leveloffset=+3]
:parameter-runtime!:

include::topics/ref_secured-sso-resources.adoc[leveloffset=+3]


[[mission-cache-nodejs]]
=== {mission-cache-nodejs-guide-name}
:cache-nodejs:

include::topics/note-booster-unvailable-oso.adoc[leveloffset=+3]

Mission proficiency level: xref:proficiency_advanced[*{proficiency-advanced}*].

The {name-mission-cache} mission demonstrates how to use a cache to increase the response time of applications.

This mission shows you how to:

* Deploy a cache to OpenShift.
* Use a cache within an application.

include::topics/con_about-caching.adoc[leveloffset=+3]

include::topics/note-preview-booster-source.adoc[leveloffset=+3]

:parameter-mission: cache
:parameter-mission-name: {name-mission-cache}

:context: {parameter-mission}-oso
include::topics/assembly_deploying-the-booster-to-openshiftonline.adoc[leveloffset=+3]

:context: {parameter-mission}-osl
include::topics/assembly_deploying-the-booster-to-openshiftlocal.adoc[leveloffset=+3]

:context: {parameter-mission}-ocp
include::topics/proc_deploying-the-booster-to-openshiftcontainerplatform.adoc[leveloffset=+3]


include::topics/cache-mission-basic-interaction.adoc[leveloffset=+3]

////
:parameter-runtime: nodejs
:parameter-runtime-name: {NodeJS}
:context: {parameter-mission}-{parameter-runtime}
include::topics/proc_running-the-booster-integration-tests.adoc[leveloffset=+3]
////

include::topics/ref_caching-resources.adoc[leveloffset=+3]


== Debugging
This section contains information about debugging your {NodeJS}{ndash}based application and using debug logging in both local and remote deployments.


[#remote-debugging]
=== Remote Debugging 
To remotely debug an application, you need to start it in a debugging mode and attach a debugger to it.

include::topics/proc_starting-your-application-locally-and-attaching-the-native-debugger.adoc[leveloffset=+3]

include::topics/proc_starting-your-application-locally-and-attaching-the-v8-inspector.adoc[leveloffset=+3]

:nodejs:
:env-var-name: NODE_ENV
:env-var-val: development
:port: 5858
//include::topics/proc_debug-start-v8-debug-nodejs-openshift.adoc[leveloffset=+3]
include::topics/proc_starting-your-application-on-openshift-in-debugging-mode.adoc[leveloffset=+3]

[#debug-logging]
=== Debug Logging

Debug logging is a way to add granular logging to an application that can be explicitly enabled only when performing debugging. This allows you to keep the logging capability in your application and only enable it when needed.

include::topics/proc_add-debug-logging.adoc[leveloffset=+3]

include::topics/proc_accessing-debug-logs-on-localhost.adoc[leveloffset=+3]

include::topics/proc_accessing-debug-logs-on-openshift-on-nodejs.adoc[leveloffset=+3]


== Developing an Application for the {NodeJS} Runtime

include::topics/con_nodejs-runtime-api.adoc[leveloffset=+2]

include::topics/proc_creating-a-nodejs-application.adoc[leveloffset=+2]

include::topics/proc_deploy-existing-nodejs-app.adoc[leveloffset=+2]


[appendix]
include::topics/ref_about-nodeshift.adoc[leveloffset=+1]

:context: nodejs
[appendix]
include::topics/proc_updating-the-deployment-configuration-of-a-booster.adoc[leveloffset=+1]

[appendix]
include::topics/ref_breakdown-of-package-json-properties.adoc[leveloffset=+1]

[appendix]
include::topics/nodejs-dev-guide-additional-resources.adoc[leveloffset=+1]

[appendix]
include::topics/ref_application-development-resources.adoc[leveloffset=+1]

[appendix]
include::topics/ref_the-source-to-image-s2i-build-process.adoc[leveloffset=+1]

[appendix]
include::topics/ref_proficiency-levels.adoc[leveloffset=+1]

[appendix]
include::topics/ref_glossary.adoc[leveloffset=+1]
